
<div class="h-full flex flex-col space-y-6 animate-fade-in">
  <div class="flex-shrink-0">
    <h1 class="text-3xl font-bold text-gray-900">المُرافع الشعبي</h1>
    <p class="text-gray-500 mt-1">
      مساعد قانوني ذكي يقوم بصياغة شكواك العامية إلى عريضة قانونية رصينة جاهزة للتقديم للجهات المختصة.
    </p>
  </div>

  <div class="flex-grow grid grid-cols-1 lg:grid-cols-2 gap-8 min-h-0">
    <!-- Input Section -->
    <div class="bg-base-100 p-6 rounded-xl shadow flex flex-col overflow-y-auto">
      <h2 class="text-xl font-bold text-ph-blue mb-4">تفاصيل الشكوى</h2>
      
      <div class="mb-4">
        <label class="block text-sm font-medium mb-2 text-gray-700">نوع القضية</label>
        <select [(ngModel)]="selectedCaseType" class="w-full p-2.5 bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-ph-blue focus:border-ph-blue">
          @for (type of caseTypes; track type) {
            <option [value]="type">{{ type }}</option>
          }
        </select>
      </div>

      <div class="flex-grow flex flex-col mb-4">
        <label class="block text-sm font-medium mb-2 text-gray-700">اشرح مشكلتك بلهجتك العادية</label>
        <textarea 
          [(ngModel)]="complaintText" 
          placeholder="مثال: يا أخي الشيخ فلان أخذ أرضي في الحوبان بالقوة وقال ما بش لك عندي حق، وهذا حصل قبل أسبوعين..." 
          class="flex-grow w-full p-4 bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-ph-blue focus:border-ph-blue resize-none h-64"></textarea>
        <p class="text-xs text-gray-500 mt-2">لا تقلق بشأن الصياغة القانونية، فقط اذكر الوقائع والأسماء والتواريخ بدقة.</p>
      </div>

      <button (click)="generateLegalDocument()" [disabled]="!complaintText() || isProcessing()" class="w-full py-3 px-5 text-white bg-ph-blue hover:bg-ph-blue-dark font-bold rounded-lg shadow-md transition-all flex justify-center items-center disabled:bg-gray-400">
        @if (isProcessing()) {
           <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
           جاري الصياغة...
        } @else {
           تحويل إلى وثيقة قانونية
        }
      </button>
    </div>

    <!-- Output Section -->
    <div class="bg-gray-50 p-6 rounded-xl shadow border border-gray-200 flex flex-col h-full relative">
      <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" /></svg>
        الوثيقة القانونية
      </h2>
      
      @if (generatedDocument()) {
        <div class="flex-grow bg-white p-8 rounded shadow-sm border border-gray-100 overflow-y-auto font-serif leading-loose text-gray-800 whitespace-pre-wrap text-lg">
          {{ generatedDocument() }}
        </div>
        <div class="mt-4 flex justify-end">
          <button (click)="printDocument()" class="px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-bold shadow flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z" /></svg>
            طباعة / حفظ كـ PDF
          </button>
        </div>
      } @else {
        <div class="flex-grow flex flex-col items-center justify-center text-gray-400 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16 mb-4 opacity-50"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" /></svg>
          <p>قم بملء البيانات في النموذج المجاور لتوليد الوثيقة هنا.</p>
        </div>
      }
    </div>
  </div>
</div>
